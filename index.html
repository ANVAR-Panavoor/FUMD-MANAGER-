<!DOCTYPE html>
<html lang="ml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fund Manager Pro</title>
    <style>
        :root { --primary: #075e54; --income: #25d366; --expense: #e74c3c; --bg: #ece5dd; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 10px; }
        .container { max-width: 600px; margin: auto; }
        
        .header { 
            background: var(--primary); color: white; padding: 20px; 
            border-radius: 15px; text-align: center; margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer;
        }

        .card { 
            background: white; border-radius: 15px; margin-bottom: 12px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); overflow: hidden;
        }
        .card-header { 
            padding: 15px 20px; cursor: pointer; display: flex; 
            justify-content: space-between; align-items: center;
            border-bottom: 1px solid #f0f0f0; font-weight: bold; color: #444;
        }
        .card-content { padding: 15px; display: none; }
        .active .card-content { display: block; }
        .active .arrow { transform: rotate(180deg); }
        .arrow { transition: 0.3s; color: #999; }

        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 15px; }
        .stat-box { padding: 10px; border-radius: 10px; color: white; text-align: center; font-size: 11px; }

        input, select, button { 
            padding: 12px; border: 1px solid #ddd; border-radius: 10px; 
            font-size: 14px; margin: 5px 0; width: 100%; box-sizing: border-box; 
        }
        button { background: var(--primary); color: white; border: none; font-weight: bold; cursor: pointer; }
        
        .list-box { background: #f9f9f9; border-radius: 10px; max-height: 200px; overflow-y: auto; margin-bottom: 10px; }
        .list-item { 
            display: flex; justify-content: space-between; padding: 10px 15px; 
            border-bottom: 1px solid #eee; font-size: 14px; align-items: center;
        }

        table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 10px; }
        td { padding: 10px 5px; border-bottom: 1px solid #f5f5f5; }
        
        .date-filter-box { background: #f1f1f1; padding: 10px; border-radius: 10px; margin-bottom: 15px; }
        .date-filter-box label { font-size: 12px; color: #666; font-weight: bold; }
        
        @media print { .no-print { display: none !important; } .card-content { display: block !important; } }
    </style>
</head>
<body>

<div class="container">
    <div class="header" onclick="editUnitName()">
        <h2 id="unitTitle" style="margin:0; font-size: 18px;">JSC KONGANAMKODE UNIT</h2>
        <small>Fund Manager Pro</small>
    </div>

    <div class="card active" id="c1">
        <div class="card-header" onclick="toggle('c1')">
            <span>üìä ‡¥±‡¥ø‡¥™‡µç‡¥™‡µã‡µº‡¥ü‡µç‡¥ü‡µÅ‡¥ï‡µæ (Custom Period)</span>
            <span class="arrow">‚ñº</span>
        </div>
        <div class="card-content">
            <div class="date-filter-box no-print">
                <div style="display: flex; gap: 10px;">
                    <div style="flex: 1;">
                        <label>From:</label>
                        <input type="date" id="fromDate" onchange="render()">
                    </div>
                    <div style="flex: 1;">
                        <label>To:</label>
                        <input type="date" id="toDate" onchange="render()">
                    </div>
                </div>
            </div>

            <div class="stats">
                <div class="stat-box" style="background:var(--income)">‡¥µ‡¥∞‡¥µ‡µç<br><b id="totalIn">0</b></div>
                <div class="stat-box" style="background:var(--expense)">‡¥ö‡µÜ‡¥≤‡¥µ‡µç<br><b id="totalOut">0</b></div>
                <div class="stat-box" style="background:var(--primary)">‡¥¨‡¥æ‡¥ï‡µç‡¥ï‡¥ø<br><b id="balance">0</b></div>
            </div>
            
            <table>
                <tbody id="ledgerBody"></tbody>
            </table>
            
            <div style="display: flex; gap: 5px; margin-top: 10px;" class="no-print">
                <button onclick="shareReport()" style="background:#25d366; flex: 2;">WhatsApp Share</button>
                <button onclick="window.print()" style="background:#555; flex: 1;">PDF</button>
            </div>
        </div>
    </div>

    <div class="card" id="c2">
        <div class="card-header" onclick="toggle('c2')">
            <span>üìù ‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥á‡¥ü‡¥™‡¥æ‡¥ü‡µç (New Entry)</span>
            <span class="arrow">‚ñº</span>
        </div>
        <div class="card-content">
            <input type="date" id="date">
            <select id="catSelect"></select>
            <select id="nameSelect"></select>
            <input type="number" id="amt" placeholder="‡¥§‡µÅ‡¥ï (Amount)">
            <select id="type">
                <option value="income">‡¥µ‡¥∞‡¥µ‡µç (Income ‚úÖ)</option>
                <option value="expense">‡¥ö‡µÜ‡¥≤‡¥µ‡µç (Expense ‚ùå)</option>
            </select>
            <button onclick="addEntry()">Save & Send Receipt</button>
        </div>
    </div>

    <div class="card" id="c3">
        <div class="card-header" onclick="toggle('c3')">
            <span>üìÇ ‡¥´‡¥£‡µç‡¥ü‡µç ‡¥á‡¥®‡¥ô‡µç‡¥ô‡µæ (Items)</span>
            <span class="arrow">‚ñº</span>
        </div>
        <div class="card-content">
            <div id="catUI" class="list-box"></div>
            <div style="display:flex; gap:5px;">
                <input type="text" id="newCat" placeholder="‡¥™‡µÅ‡¥§‡¥ø‡¥Ø ‡¥á‡¥®‡¥Ç">
                <button onclick="addCat()" style="width:70px; background:var(--
                    
